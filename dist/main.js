(()=>{"use strict";class e extends Map{get(e){let t=super.get(e);if(!t&&"string"==typeof e)for(let[t,n]of this)if(e.toLowerCase()==String(t.name).toLowerCase())return n;return t}set(e,t){return super.set(e,t)}has(e){for(let[t,n]of this)if("string"==typeof e){if(e.toLowerCase()==String(t.name).toLowerCase())return t}else if(JSON.stringify(e)==JSON.stringify(t))return t}}class t{constructor(t,n){this.neighbors=new e,null!=t&&this.addVertices(t),null!=n&&this.addEdges(n)}vertexAt(e){if(e<0||e>=this.neighbors.keys().length)throw new TypeError("Index "+e+" not within length of total vertices.");let t=0;for(let n of this.neighbors.keys()){if(t===e)return n;t++}return null}indexOf(e){let t=0;for(let n of this.neighbors.keys()){if(n===e)return t;t++}return-1}addVertex(e){this.neighbors.set(e,[])}addVertices(e){if(!Array.isArray(e))throw new TypeError("param 'vertices' must be an Array of vertices with 'x' and 'y' properties.");for(let t of e)this.addVertex(t)}addEdge(e,t,n){if(!isNaN(e)||!isNaN(t)){if(e<0||e>=this.neighbors.size)return console.log("couldn't add 'u' "+e+": index out of bounds"),-1;if(t<0||t>=this.neighbors.size)return console.log("couldn't add 'v' "+t+": index out of bounds"),-1;let i=this.vertexAt(e),r=this.vertexAt(t);return this.neighbors.get(i).push({v:r,weight:n||null}),this.neighbors.get(r).push({v:i,weight:n||null}),!0}return!!this.neighbors.has(e)&&(this.neighbors.get(e).push({v:t,weight:n||null}),this.neighbors.get(t).push({v:e,weight:n||null}),!0)}addEdges(e){if(!Array.isArray(e))throw new TypeError("param 'edges' must be an Array.");for(let t of e)Array.isArray(t)?this.addEdge(t[0],t[1],t[2]?t[2]:void 0):this.addEdge(t.u,t.v,t.weight?t.weight:void 0)}removeVertex(e){let t=isNaN(e)?e:this.vertexAt(e);if(!this.neighbors.has(e))throw new TypeError("v must be a vertex in the graph or an index to one.");var n=!1;for(let e of this.neighbors.get(t)){let i=this.neighbors.get(e.v);for(let e=0;e<i.length;e++)i[e].v==t&&(n=!0),n&&e!=i.length-1&&(i[e].v=i[e+1].v);i.length=i.length-1,n=!1}return this.neighbors.delete(t),!0}removeEdge(e,t){let n=e,i=t;if("number"==typeof e&&"number"==typeof t&&((e<0||e>=this.neighbors.size)&&console.log("u cannot be removed because it does not exist."),(t<0||t>=this.neighbors.size)&&console.log("v cannot be removed because it does not exist."),n=this.vertexAt(e),i=this.vertexAt(t)),this.neighbors.has(n)&&this.neighbors.has(i)){let e=this.neighbors.get(n);for(var r=e.length;r>=0;r--)e[r].v===i&&e[r].splice(r,r);return!0}return!1}getVertices(){return JSON.parse(JSON.stringify([...this.neighbors.keys()]))}getNeighbors(){return this.neighbors}getSize(){return this.neighbors.size}getWeight(e,t){"number"==typeof e&&"number"==typeof t&&((e<0||e>=this.neighbors.size)&&console.log("Cannot get weight of edge with u because "+e+" is not within index bounds."),(t<0||t>=this.neighbors.size)&&console.log("Cannot get weight of edge with v because "+t+"is not within index bounds."),e=this.vertexAt(e),t=this.vertexAt(t));for(let n of this.neighbors.get(e))if(n.v==t)return n.weight;return null}isDisplayable(){return this.getVertices().every((e=>"x"in e&&"y"in e&&"name"in e))}hasVertexInRadius(e,t){for(let[n,i]of this.neighbors)if(Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y))<=t)return n;return null}setVertexName(e,t){this.neighbors.has(e)&&Object.defineProperty(e,"name",{value:t})}setWeight(e,t,n){"number"==typeof e&&"number"==typeof t&&((e<0||e>=this.neighbors.size)&&console.log("Cannot get weight of edge with u because "+e+" is not within index bounds."),(t<0||t>=this.neighbors.size)&&console.log("Cannot get weight of edge with v because "+t+"is not within index bounds."),e=this.vertexAt(e),t=this.vertexAt(t));for(let i of this.neighbors.get(e))i.v==t&&Object.defineProperty(i,"weight",{value:n});for(let i of this.neighbors.get(t))if(i.v==e)return Object.defineProperty(i,"weight",{value:n}),!0;return!1}print(){this.neighbors.forEach(((e,t)=>{let n=0==e.length?"-":e.reduce(((e,t)=>e.v?e.v.name:e+", "+t.v.name));console.log("vertex["+t.name+"]: x: "+t.x+", y: "+t.y+" -> "+n)}))}dfs(e){if("number"==typeof e&&(e=this.vertexAt(e)),null==e)throw new TypeError("Must pass in a vertex or an index to a vertex to search the graph.");var t=[],i={};return this.dfsRecursive(e,i,t,{}),new n(e,i,t)}dfsRecursive(e,t,n,i){n.push(e),i[JSON.stringify(e)]=!0;let r=this.neighbors.get(e);for(let o of r)i[JSON.stringify(o.v)]||(t[JSON.stringify(o.v)]=JSON.stringify(e),this.dfsRecursive(o.v,t,n,i))}bfs(e){if("number"==typeof e&&(e=this.vertexAt(e)),null==e)throw new TypeError("Must pass in a vertex or an index to a vertex to search the graph.");var t=[],i={},r=[e],o={};for(o[JSON.stringify(r[0])]=!0;0!=r.length;){let e=r.shift(),n=this.neighbors.get(e);for(let a of n)o[JSON.stringify(a.v)]||(t.push(a.v),r.push(a.v),i[JSON.stringify(a.v)]=JSON.stringify(e),o[JSON.stringify(a.v)]=!0)}return new n(e,i,t)}getMinimumSpanningTree(e){if("number"==typeof e&&null===(e=vertexAt(e)))throw new TypeError("Vertex must be a vertex or an index of a vertix in the graph to get a minimum spanning tree.");let t={};var n=0;let r=[];for(r.push(e);r.length<this.getSize();){let e=-1,i=-1,o=Number.MAX_VALUE;for(let t of r)for(let n of this.neighbors.get(t))!r.includes(n.v)&&n.weight<o&&(o=n.weight,e=t,i=n.v);if(-1==i)break;r.push(i),t[JSON.stringify(i)]=JSON.stringify(e),n+=o}return new i(e,t,r,n)}getShortestPath(e){if("number"==typeof startingVertex&&(startingVertex=vertexAt(startingVertex),null===startingVertex))throw new TypeError("Vertex must be a vertex or an index of a vertix in the graph to get its shortest path.");let t={};for(let e of this.neighbors.keys())t[JSON.stringify(e)]=Number.MAX_VALUE;t[JSON.stringify(e)]=0;let n={},i=[];for(;i.length<this.getSize();){var o=-1,a=Number.MAX_VALUE;for(let[e,n]of this.neighbors)!i.includes(e)&&t[JSON.stringify(e)]<a&&(a=t[JSON.stringify(e)],o=e);if(-1==o)break;i.push(o);for(let e of this.neighbors.get(o))!i.includes(e.v)&&t[JSON.stringify(e.v)]>t[JSON.stringify(o)]+e.weight&&(t[JSON.stringify(e.v)]=t[JSON.stringify(o)]+e.weight,n[JSON.stringify(e.v)]=JSON.stringify(o))}return new r(e,n,i,t)}}class n{root;parents;searchOrder;constructor(e,t,n){this.root=e,this.parents=t,this.searchOrder=n}getRoot(){return JSON.parse(JSON.stringify(this.root))}getParents(){return this.parents}getNumberOfVerticesFound(){return this.searchOrder.length}getPath(e){"string"!=typeof e&&(e=JSON.stringify(e));let t=[];do{t.push(e),e=this.parents[e]}while(null!=this.parents[e]);return t}getSearchOrder(){return[...this.searchOrder]}printTree(){console.log("Root: "+this.root),console.log("Edges: ");for(let e in this.parents)console.log("("+this.parents[e]+", "+e+")")}}class i extends n{totalWeight;constructor(e,t,n,i){super(e,t,n),this.totalWeight=i}getTotalWeight(){return this.totalWeight}}class r extends n{cost;constructor(e,t,n,i){super(e,t,n),this.cost=i}getCost(e){if("number"==typeof e&&null===(e=vertexAt(startingVertex)))throw new TypeError("Vertex must be a vertex or an index of a vertix in the graph to get its cost.");return this.cost[JSON.stringify(e)]}}const o=t;function a(e){let t;for(t=1;!Number.isInteger(e);t*=10,e*=10);return t/e}const s=e=>{const t=(new Option).style;return t.color=e,""!==t.color},l=document.getElementById("graphView"),h=l.getContext("2d"),c=function(){let e=!1;var t;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hipDPR|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e}(),d=c?20:6,g=10,u=window.devicePixelRatio;function y(e){if(e instanceof t)return!0;if(void 0===e)return e=new t,console.log("graph in GraphView was undefined"),!1;throw new TypeError("Cannot display anything other then a Graph object")}function f(){M.getZoomScale();let e=M.getPosition(),t=new B(a(0!==e.x?e.x:1)/u,a(0!==e.y?e.y:1)/u),n=new B(l.clientWidth+4,l.clientHeight+4);h.clearRect(t.x,t.y,n.x,n.y)}function m(e,t,n){if(void 0===n)n=l;else if(!(n instanceof HTMLCanvasElement))throw new TypeError("'canv' must be an HTMLCanvasElement.");if(void 0===e)e=n.getBoundingClientRect().width;else if(isNaN(e))throw new TypeError("'width' must be a number.");if(void 0===t)t=n.getBoundingClientRect().height;else if(isNaN(t))throw new TypeError("'height' must be a number.");n.width=e*u,n.height=t*u,n.getContext("2d").scale(u,u),n.style.width=e+"px",n.style.height=t+"px"}function p(e,t="black",n,i,r){if(h.save(),r&&T(e),h.fillStyle=t,h.beginPath(),h.arc(e.x,e.y,d,0,2*Math.PI),h.fill(),i&&w(e),1!==n&&2!==n||(n=new L(n)),n instanceof L){if(1===n.grad)(o=h.createLinearGradient(n.axisBegin??0,e.y,e.x*n.gradPercentage,e.y)).addColorStop(0,n.color),o.addColorStop(1,"rgba(0, 0, 0, 0)"),h.strokeStyle=o,h.lineWidth=2,h.beginPath(),h.moveTo(n.axisBegin??0,e.y),h.lineTo(e.x*n.gradPercentage,e.y),h.stroke();else if(2===n.grad){const t=n.axisBegin<e.y?n.gradPercentage:2-n.gradPercentage;var o;(o=h.createLinearGradient(e.x,n.axisBegin??0,e.x,e.y*t)).addColorStop(0,n.color),o.addColorStop(1,"rgba(0, 0, 0, 0)"),h.strokeStyle=o,h.lineWidth=2,h.beginPath(),h.moveTo(e.x,n.axisBegin??0),h.lineTo(e.x,e.y*t),h.stroke()}h.restore()}else h.restore()}function w(e,t="14px Arial",n="blue",i,r=l.getContext("2d")){i&&(r.fillStyle="boolean"!=typeof i&&s(i)?i:"rgb(246, 242, 242, .7)",r.fillRect(e.x-3.6*String(e.name).length,e.y-26,7.2*String(e.name).length,14)),r.fillStyle=n,r.font=t,r.textAlign="center",r.fillText(e.name,e.x,e.y-15),x({x:e.x,y:e.y},{x:e.x,y:e.y-12},"blue",null,2)}function v(e,t,n=!0,i){n&&f();for(let n of e)p(n,i,t,!0)}function x(e,t,n="black",i=n,r=2,o,a){h.lineWidth=r,h.strokeStyle=n,h.beginPath(),h.save(),a&&T(e),h.moveTo(e.x,e.y),h.restore(),h.save(),a&&T(t),h.lineTo(t.x,t.y),h.restore(),h.stroke(),h.restore(),null!==i&&(p(e,i,void 0,void 0,a),p(t,i,void 0,void 0,a)),o&&b(e,t,o,n)}function b(e,t,n,i="black",r=h){let o=Math.atan2(t.y-e.y,t.x-e.x),a=Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))/2,s={x:t.x-a*Math.cos(o),y:t.y-a*Math.sin(o)};(o<-Math.PI/2||o>Math.PI/2)&&(o+=Math.PI),r.save(),T(s,r),r.translate(s.x,s.y),r.rotate(o),r.translate(-s.x,-s.y),r.fillStyle="white",r.fillRect(s.x-4*String(String(n)).length,s.y-5,8*String(n).length,10),r.fillStyle=i,r.font="14px Arial",r.textAlign="center",r.fillText(n,s.x,s.y+5),r.restore()}function S(e,t,n="black",i=n,r){x(e,t,n,i,void 0,r);let o=Math.atan2(t.y-e.y,t.x-e.x),a={x:t.x-d*Math.cos(o),y:t.y-d*Math.sin(o)};h.beginPath(),h.moveTo(a.x,a.y),h.lineTo(a.x-g*Math.cos(o-Math.PI/6),a.y-g*Math.sin(o-Math.PI/6)),h.moveTo(a.x,a.y),h.lineTo(a.x-g*Math.cos(o+Math.PI/6),a.y-g*Math.sin(o+Math.PI/6)),h.closePath(),h.strokeStyle="blue",h.lineWidth=2,h.stroke(),b(e,t,r)}function E(e,t,n=!0,i=.9,r="black",o=r,s="blue",c){return x(e,t,r,o,void 0,c),new Promise((r=>{let o,y=Math.atan2(t.y-e.y,t.x-e.x),f=Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)),p=f,v=document.createElement("canvas");m(parseInt(l.style.width),parseInt(l.style.height),v),v.style.position="absolute",v.style.border="2px solid blue",document.getElementById("canvasContainer").appendChild(v);let x=v.getContext("2d");const S=()=>{f*=i,o={x:t.x-f*Math.cos(y),y:t.y-f*Math.sin(y)},x.clearRect(0,0,l.width,l.height),x.beginPath(),T(o,x),x.moveTo(o.x,o.y),T({x:o.x-g*Math.cos(y-Math.PI/6),y:o.y-g*Math.sin(y-Math.PI/6)},x),x.lineTo(o.x-g*Math.cos(y-Math.PI/6),o.y-g*Math.sin(y-Math.PI/6)),T(o,x),x.moveTo(o.x,o.y),T({x:o.x-g*Math.cos(y+Math.PI/6),y:o.y-g*Math.sin(y+Math.PI/6)},x),x.lineTo(o.x-g*Math.cos(y+Math.PI/6),o.y-g*Math.sin(y+Math.PI/6)),x.strokeStyle=s,x.lineWidth=2,x.stroke(),x.lineWidth=2,x.beginPath(),T(o,x),x.moveTo(o.x,o.y);let m=p-f;if(T({x:o.x-m*Math.cos(y),y:o.y-m*Math.sin(y)},x),x.lineTo(o.x-m*Math.cos(y),o.y-m*Math.sin(y)),x.closePath(),x.stroke(),b(e,t,c,void 0,x),w(e,void 0,void 0,!0,x),w(t,void 0,void 0,!0,x),f>d)requestAnimationFrame(S);else{if(n){let e=a(u);h.scale(e,e),h.drawImage(v,0,0),h.scale(u,u)}document.getElementById("canvasContainer").removeChild(v),r()}};requestAnimationFrame(S)}))}async function P(e,t=!0,n){y(e),t&&f(),e.getNeighbors().forEach(((e,t)=>{for(let i of e)switch(n){case 1:S(t,i.v,void 0,void 0,i.weight);break;case 2:E(t,i.v,void 0,void 0,void 0,void 0,void 0,i.weight);break;default:x(t,i.v,void 0,void 0,void 0,i.weight,!0)}p(t,void 0,void 0,!1,!0)})),function(e,t,n,i,r,o=l.getContext("2d")){for(let a of e)o.save(),r&&T(a),w(a,t,n,i,o),o.restore()}(e.getVertices(),void 0,void 0,!0,!0)}const M=(()=>{var e,t=[1,0,0,1,0,0];let n=1;const i={x:0,y:0};var r=!0,o={x:0,y:0};return{setContext(t){e=t,r=!0},apply(){r&&this.update(),e.setTransform(t[0],t[1],t[2],t[3],t[4],t[5])},getZoomScale:()=>n,getPosition:()=>i,getDefaultTranslate:()=>o,isDirty:()=>r,update(){r=!1,t[3]=t[0]=u,t[2]=t[1]=0,t[4]=o.x+i.x,t[5]=o.y+i.y},scaleAt(e,t){r&&this.update(),n*=t,i.x=e.x-(e.x-i.x)*t,i.y=e.y-(e.y-i.y)*t,r=!0},setDefaultTranslate(e,t){o={x:e,y:t}}}})();function T(e,t=h){t.translate(e.x*M.getZoomScale()-e.x,e.y*M.getZoomScale()-e.y)}function N(e){let t=M.getPosition(),n=M.getZoomScale();return M.getDefaultTranslate(),new B(e.x/u*(a(n)*u)-t.x*a(n)/u,e.y/u*(a(n)*u)-t.y*a(n)/u)}function O(e){let t=M.getPosition(),n=M.getZoomScale();return M.getDefaultTranslate(),new B((u*e.x/(a(n)*u*u)+t.x*a(n)/u*u/(a(n)*u*u))*u,(u*e.y/(a(n)*u*u)+t.y*a(n)/u*u/(a(n)*u*u))*u)}function k(){h.setTransform(u,0,0,u,0,0)}function I(e,t){document.getElementsByClassName("alert")[0].innerHTML=e,document.getElementsByClassName("alert")[0].style.display="block",setTimeout((()=>{(function(e){return document.getElementsByClassName("alert")[0].innerText.replace(/\n/g,"")!==e.replace(/<[^>]*>/g,"")})(e)||(document.getElementsByClassName("alert")[0].style.display="none")}),t)}async function A(e,t,n,i){return new Promise((r=>{let o=document.createElement("input");o.placeholder=t,o.type="text",o.size=8,o.classList.add("poppin"),document.body.appendChild(o);const a=parseInt(window.getComputedStyle(document.getElementById("canvasContainer")).left),s=parseInt(window.getComputedStyle(l).border);let h=e.x-o.clientWidth/2+a+s,c=e.x+o.clientWidth/2+a+2*s,d=h>0?c<document.body.clientWidth?h:document.body.clientWidth-o.clientWidth:0;o.style.left=d+"px",o.style.top=e.y+"px",o.onblur=()=>{document.body.removeChild(o),n()},o.onkeydown=e=>{if("Enter"===e.key){let t=o.value?o.value:o.placeholder;null!=i(t)&&1!=i(t)||(o.blur(),r()),e.stopPropagation()}},setTimeout((()=>o.focus()),10)}))}async function C(e,t,n){const i=document.getElementById("header").getBoundingClientRect().height,r=document.getElementById("legend").getBoundingClientRect().height;let o=O(e),a=O(t),s=Math.atan2(a.y-o.y,a.x-o.x),l=Math.sqrt((a.x-o.x)*(a.x-o.x)+(a.y-o.y)*(a.y-o.y)),h=l/2,c=a.x-h*Math.cos(s),d=a.y-h*Math.sin(s)+i+r;await A(new B(c,d),Math.floor(4.5*l),(()=>{P(n)}),(i=>{isNaN(i)||0==Number(i)?I("Input for connecting points must be a number ('0' for no 'weight'on the connection)"):n.setWeight(e,t,Number(i))}))}M.setContext(h);class B{x=0;y=0;name=null;constructor(e,t,n){2==arguments.length?(this.x=e,this.y=t):3==arguments.length&&(this.x=e,this.y=t,this.name=n)}}class L{grad;axisBegin=0;gradPercentage=.93;color="black";constructor(e,t,n,i){switch(arguments.length){case 4:s(i)&&(this.color=i);case 3:if("number"==typeof n){if(!(n>1||n<0))throw new TypeError('"gradPercentage" must be between 0 and 1.');this.gradPercentage=n}case 2:"number"==typeof t&&(this.axisBegin=t);case 1:if(1!==e&&2!==e)throw new TypeError('"grad" property must be the values of GRAD_BY_X or GRAD_BY_Y constantsof this script.');this.grad=e}}}var D,V=document.getElementById("graphView"),J=V.getContext("2d");function R(e,t="y",n=!0,i=2,r=.1,o=1e3,a=[],s=!0){return new Promise((l=>{D=new Array(e.length).fill(!1,0,e.length);var h=void 0;!0===n&&(h="y"===t?(V.clientHeight-26+12)/e.length:V.clientWidth/e.length),this.delayed=0,s&&J.clearRect(0,0,V.width,V.height);const c=async()=>{J.fillStyle="rgb(255, 255, 255, "+r+")",J.fillRect(0,0,V.width,V.height);for(var s=0;s<e.length;s++){let r=Array.isArray(n)?n[s]:14+Math.floor((s+1)*h-h/2),o=a[s]?a[s]:"0, 0, 0";z(e[s],r,i,t,o),Object.getOwnPropertyDescriptor(e[s],t).value===r&&(D[s]=!0)}j()?(this.delayed||(this.delayed=Date.now()),Date.now()-this.delayed<=o?window.requestAnimationFrame(c):l()):window.requestAnimationFrame(c)};requestAnimationFrame(c)}))}function z(e,t,n,i,r){var o=Object.getOwnPropertyDescriptor(e,i).value;o<t?o=o+n>t?t:o+n:o>t&&(o=o-n<t?t:o-n),Object.defineProperty(e,i,{value:o});let a=r||"0, 0, 0";p(e,"rgb("+a+", .5)",new L("y"===i?1:2,null,null,"rgb("+a+", .5)"),!0)}const j=()=>D.every((e=>e));function W(e,t,n,i=0){return new Promise((r=>{let o=1,a=0,s=0;const l=async()=>{o-=n,a=1-o,Math.min(o,a)==a?t():e();let h=Math.max(o,a)-Math.min(o,a);J.fillStyle="rgb(255, 255, 255, "+h+")",J.fillRect(0,0,V.width,V.height),Math.min(o,a)==a?e():t(),J.fillStyle="rgb(255, 255, 255, "+Math.min(o,a)+")",J.fillRect(0,0,V.width,V.height),parseFloat(o-1)>-1?requestAnimationFrame(l):(s||(s=Date.now()),Date.now()-s>=i?r():requestAnimationFrame(l))};requestAnimationFrame(l)}))}var q,F;async function H(e,t){if(!t)throw new TypeError("Must specify an axis of the array objects to compare ('x' or 'y').");if(!(e instanceof o&&e.isDisplayable()))throw new TypeError("Every object must have 'x' and 'y' co-ordinate properties.");F="x"===(q=t)?"y":"x";const n=e.getVertices(),i="x"===q?1:2;"x"===q?n.sort(((e,t)=>e.y-t.y)):n.sort(((e,t)=>e.x-t.x)),await W((()=>P(e,!1,!1)),(()=>v(n,i,!1)),.014,150),await new R(n,F,void 0,1.05,void 0,1500,void 0,!1),await G(0,n.length-1,n),await new Promise((t=>{setTimeout((async()=>{await function(e,t,n){var i="y"==n?1:2;return W((()=>{for(let r of e.getVertices()){let e=Object.getOwnPropertyDescriptor(r,n).value,o=0,a=t.length,s=a/2;for(;a>=o;)if(Object.getOwnPropertyDescriptor(t[s],n).value>e)a=s-1,s=0|o+(a-o)/2;else if(Object.getOwnPropertyDescriptor(t[s],n).value<e)o=s+1,s=0|o+(a-o)/2;else{a=o-1;let e=Object.getOwnPropertyDescriptor(t[s],"y"==n?"x":"y").value;p(r,void 0,new L(i,e,void 0,"rgb(144, 238, 144)"),!0),p(t[s],"rgb(144, 238, 144)",void 0,!0)}}}),(()=>{P(e,!1)}),.005)}(e,n,q),t()}),2500)}))}async function G(e,t,n){if(t-e!=0){let i=e,r=0|e+(t-e)/2;await G(i,r,n);let o=r+1,a=t;await G(o,a,n),await new Promise((e=>e(function(e,t,n,i,r){let o=e,a=new Array(i-e+1),s=0;for(;e<=t&&n<=i;)Object.getOwnPropertyDescriptor(r[e],q).value<Object.getOwnPropertyDescriptor(r[n],q).value?a[s++]=r[e++]:a[s++]=r[n++];for(;e<=t;)a[s++]=r[e++];for(;n<=i;)a[s++]=r[n++];for(let e=0;e<a.length;e++)r[o++]=a[e]}(i,r,o,a,n)))),await function(e,t,n,i){return new R(e,t,!0,"y"==t?4:2.5,.1,500,new Array(e.length).fill("144, 238, 144",n,i+1),!1)}(n,F,e,t)}}const X=document.getElementById("graphView"),Y=X.getContext("2d"),Z="blue",_=500;function U(e,t,n,i,r,o){return new Promise((a=>{v(e,void 0,!0),x(t.p1,t.p2,Z),x(n,i,"green"),Q(e[0===r?0:r-1].x,e[o].x),setTimeout((()=>{f(),a()}),500)}))}function K(e,t,n,i){return new Promise((r=>{v(e,void 0,!0),x(t.p1,t.p2,Z),Q(e[0===n?0:n-1].x,e[i].x),setTimeout((()=>{r()}),500)}))}function Q(e,t,n="yellow"){x({x:e,y:0},{x:e,y:X.clientHeight},n,null),x({x:t,y:0},{x:t,y:X.clientHeight},n,null)}function $(e,t){f(),v(e,void 0,!1),x(t.p1,t.p2,Z)}async function ee(e){var t;if(!e instanceof o)throw new TypeError("Must pass in an instance of a Graph.");if(!(t=e.getVertices()).every((e=>e.hasOwnProperty("x")&&e.hasOwnProperty("y"))))throw new TypeError("Every object must have an 'x' and a 'y' property.");var n=[...t].sort(((e,t)=>e.x-t.x)),i=[...t].sort(((e,t)=>e.y-t.y));let r=await te(n,0,n.length-1,i);return $(n,r),await new Promise((t=>{setTimeout((async()=>{await function(e,t){return W((()=>{$(e.getVertices(),t)}),(()=>P(e,!1)),.008)}(e,r),t()}),5e3)})),[r.p1,r.p2]}async function te(e,t,n,i){if(n-t<=3)return await async function(e,t,n,i){let r=new ie(e[0],e[1]);for(let o=0;o<e.length;o++)for(let a=o+1;a<e.length;a++)0===o&&1===a||(await U(t,r,e[o],e[a],n,i),ne(e[o],e[a])<r.getDistance()&&(r=new ie(e[o],e[a])),await K(t,r,n,i));return r}(e.slice(t,n+1),e,t,n);{let r=t,o=0|t+(n-t)/2,a=await te(e,r,o,i),s=o+1,l=n,h=await te(e,s,l,i),c=a.getDistance()<h.getDistance()?a:h;await function(e,t,n,i,r,o){return new Promise((a=>{v(e,void 0,!0),x(t.p1,t.p2,Z),x(n.p1,n.p2,Z),Q(e[r].x,e[o].x);let s=e[0|r+(o-r)/2+(+(0!=r)?1:0)].x;x({x:s,y:0},{x:s,y:X.clientHeight},"yellow",null),setTimeout((()=>{f(),v(e,void 0,!1),x(i.p1,i.p2,Z),Q(e[r].x,e[o].x),x({x:s,y:0},{x:s,y:X.clientHeight},"yellow",null),setTimeout((()=>{a()}),_)}),_)}))}(e,a,h,c,0===t?0:t-1,n);let d=await async function(e,t,n,i,r){let o=t[0|n+(i-n)/2].x;!function(e,t){var n;f(),Q(e-t,e+t,Z),n=e,Y.strokeStyle="yellow",Y.beginPath(),Y.setLineDash([5,10]),Y.moveTo(n,0),Y.lineTo(n,X.height),Y.stroke(),Y.setLineDash([])}(o,e.dist);let a=[],s=[];for(let t of r)t.x<=o&&t.x>=o-e.getDistance()?a.push(t):t.x>o&&t.x<=o+e.getDistance()&&s.push(t);let l=0;for(let t of a){for(;l<s.length&&s[l].y<=t.y-e.getDistance();)l++;let n=l;for(;n<s.length&&+(s[n].y-t.y)<=e.getDistance();)ne(t,s[n])<e.getDistance()&&(e=new ie(t,s[n])),n++}return e}(c,e,t,n,i);return await function(e,t,n,i,r){return new Promise((o=>{v(e,void 0,!1),x(t.p1,t.p2,Z),Q(e[i].x,e[r].x),setTimeout((()=>{v(e,void 0,!0),x(n.p1,n.p2,Z),Q(e[i].x,e[r].x),setTimeout((()=>{o()}),_)}),_)}))}(e,c,d,t,n),d}}function ne(e,t){let n=(t.x-e.x)*(t.x-e.x),i=(t.y-e.y)*(t.y-e.y);return Math.sqrt(n+i)}class ie{constructor(e,t){this.p1=e,this.p2=t,this.dist=this.distance(this.p1,this.p2)}distance=ne;getDistance(){return this.dist}}const re="blue",oe=8e3;async function ae(e,t,n,i){let r=E(e,t,!0,i?.93:.94,void 0,void 0,void 0,n.getWeight(n.getNeighbors().has(e),n.getNeighbors().has(t)));p(e,re),p(t,re),i?await new Promise((e=>setTimeout((()=>e()),i))):await r}function se(e,t,n,i,r){let o=e.getPath(t),a="Path Found: <b>"+e.getRoot().name+"</b> > ";a+=1==o.length?"<b>"+JSON.parse(o[0]).name+"</b>":o.reduce(((e,t,n)=>"<b>"+JSON.parse(t).name+"</b> > "+(1==n?"<b>"+JSON.parse(e).name+"</b>":e)));let s=a+"</br>Path Length: <b>"+o.length+"</b>";s+=(i?"</br>Search Count: <b>"+i+"</b>":"")+(r||""),I(s,n)}const le="blue";document.getElementById("graphView").getContext("2d");let he=0;function ce(){f();let e=M.getZoomScale(),t=M.getPosition(),n=a(e),i=e!=M.getZoomScale()?t.x:1,r=e!=M.getZoomScale()?t.y:1,o={x:(-n*t.x+1)/(i-(1==n)?2:n),y:(-n*t.y+1)/(r-(1==n)?2:n)};M.scaleAt(o,n),M.apply()}function de(e,t){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}var ge,ue,ye,fe,me,pe,we;let ve,xe,be;var Se;let Ee=!1,Pe=!1;async function Me(e){console.log(e.type),me=ye.getBoundingClientRect().height,pe=fe.getBoundingClientRect().height;var t=document.body.clientWidth-2*be,n=document.body.clientHeight-me-pe-2*be;"load"===e.type?await function(e,t){let n=0,i=0;return new Promise((r=>{let o=()=>{let a=.12*(e-l.width),s=.12*(t-l.height),h=.052*e,c=.052*t,d=.38;if(n+=a>d?a<h?a:h:d,i+=s>d?s<c?s:c:d,l.width=n,l.height=i,!(l.width<e||l.height<t))return r(),m(),!0;requestAnimationFrame(o)};requestAnimationFrame(o)}))}(t,n):"orientationchange"!==e.type&&"resize"!==e.type||(m(t,n),P(ge,!0))}async function Te(e,t){if(we)return;me=ye.getBoundingClientRect().height;let n=t instanceof B?t:ze(e),i=N(n),r=ge.hasVertexInRadius(i,d);if(!r||r.name){if("mousedown"==e.type&&2==e.button||"touchstart"==e.type)return r&&function(e,t){y(t),f(),e=t.getNeighbors().has(e);let n=t.getNeighbors().get(e);t.removeVertex(e);for(let t of n)x(e,t,"red",null),p(t);P(t,!1),p(e,"red",void 0,!0),setTimeout((()=>{P(t,!0)}),1e3)}(r,ge),c&&window.navigator.vibrate(100),!0;if("mousedown"==e.type&&0==e.button||"touchstart"==e.type&&Date.now()-e.touchstamp<1e3){if(r)return ve=r,p(ve,"blue",void 0,!1,!0),!0;if(ge.hasVertexInRadius(i,2*d))return I("<strong>A point must not overlap on another.</strong> Space is nice.",3e3),!1;{let e=new B(i.x,i.y);!function(e,t){y(t),t.addVertex(e),P(t,!0)}(e,ge);let t=()=>{null==e.name&&ge.removeVertex(e),P(ge)},r=t=>{ge.setVertexName(e,t),Se++};return await A(new B(n.x,me+pe+n.y-26),Se,t,r),!0}}}}function Ne(e){if(!ve)return;let t=ze(e,!0);return function(e,t,n){f(),x(t,n,le,"blue",void 0,!1,!0),P(e,!1),p(t,le,void 0,!1,!0)}(ge,ve,t),t}async function Oe(e,t){if(!ve)return!1;let n=t instanceof B?t:ze(e),i=N(n),r=ge.hasVertexInRadius(i,d),o=ve;if(ve=null,r===o)return P(ge,!0),!1;if(r)return ge.addEdge(o,r),await C(o,r,ge),!0;if(ge.hasVertexInRadius(i,2*d))return I("<strong>A point must not overlap on another.</strong> Space is nice.",3e3),P(ge),!1;{ge.addVertex(i),ge.addEdge(o,i),P(ge);let e=()=>{null==i.name&&ge.setVertexName(i,Se++),P(ge)},t=e=>{ge.setVertexName(i,e),Se++};return await A(new B(n.x,me+pe+n.y-26),Se,e,t),await C(o,i,ge),P(ge),ge.print(),!0}}function ke(e){1===e.touches.length?(Ee=ze(e),function(e){return Pe?(e.preventDefault(),Te(e)):(Pe=!0,setTimeout((()=>{Pe=!1}),300),!1)}(e)||setTimeout((()=>{if(!Ee)return;let t,n=ze(e,!0);(t=ge.hasVertexInRadius(n,2*d))&&(c&&window.navigator.vibrate(100),ve=t,p(ve,"blue"))}),1e3)):Ee=!1}function Ie(e){switch(e.touches.length){case 1:Ee=Ne(e);break;case 2:Re(e)}}function Ae(e){let t;return t=ve?Oe(e,Ee):Te(e,Ee),Ee=!1,t}async function Ce(e){qe(),ce();let t="byX"===e.target.id?"x":"y";return Ve([["green","Sorting By "+t.toUpperCase()]]),We(),await H(ge,t),je(),Je(),!0}async function Be(){return qe(),ce(),Ve([["blue","Closest Pair"],["darkGreen","Comparing Pair"],["yellow","Searching Sector"],["blue-yellow","Merging Sectors"]]),We(),await ee(ge),je(),Je(),!0}async function Le(){qe(),ce(),P(ge);let e=document.getElementById("start").value,t=document.getElementById("searchingFor").value,i=document.getElementById("searchType").innerText;if((e=ge.getNeighbors().has(e))&&(t=ge.getNeighbors().has(t))||I("Could not find the starting or searching point in the graph.",5e3),e!==t)return Ve([["blue","Searched"]]),We(),P(ge),"Depth-First Search"==i?await async function(e,t,i){if(!e instanceof n)throw new TypeError("Only displays results from a SearchTree class, returned from a Graph.dfs");let r=e.getParents();var o=!1,a=0;for(let e in r){let n=JSON.parse(r[e]),s=JSON.parse(e);if(await ae(n,s,i,325),a++,e===JSON.stringify(t)){o=!0;break}}!1===o?I("No path found.",3e3):se(e,t,oe,a)}(ge.dfs(e),t,ge):"Breadth-First Search"==i?await async function(e,t,i){if(!e instanceof n)throw new TypeError("Only displays results from a SearchTree class, returned from a Graph.bfs");let r=e.getParents(),o=new Map,a=0;o.set(JSON.stringify(e.getRoot()),[]);for(let n in r){if(o.has(r[n])||await s(o,i),a++,n===JSON.stringify(t))return o.get(r[n]).push(n),await s(o,i),void se(e,t,oe,a);await void 0,o.get(r[n]).push(n)}async function s(e,t){let n,i,r=[];for(let[o,a]of e){for(let e of a)n&&await ae(n,i,t,250),n=JSON.parse(o),i=JSON.parse(e),r.push(e);e.delete(o)}await ae(n,i,t),await new Promise((e=>setTimeout((()=>e()),75)));for(let t of r)e.set(t,[])}await s(o,i),I("No path found.",3e3)}(ge.bfs(e),t,ge):"Smallest Entirety Distance"==i?await async function(e,t){if(!e instanceof n)throw new TypeError("Only displays results from a SearchTree class returned from Graph.");let i=e.getParents(),r=null;for(let e in i){let n=JSON.parse(i[e]),o=JSON.parse(e);r=E(n,o,!0,.95,void 0,void 0,void 0,t.getWeight(t.getNeighbors().has(n),t.getNeighbors().has(o)))}v(t.getVertices(),void 0,!1,"blue"),await r,I("Smallest distance to travel to every point: <b>"+e.getTotalWeight()+"</b>",oe)}(ge.getMinimumSpanningTree(e),ge):"Shortest Path"==i&&await async function(e,t,n){let i,r=e.getPath(t),o=e.getRoot();for(let e=r.length-1;-1!=e;e--)i=JSON.parse(r[e]),await ae(o,i,n,250),o=i;let a="</br>Total Path Distance: <b>"+e.getCost(t)+"</b>";se(e,t,oe,void 0,a)}(ge.getShortestPath(e),t,ge),je(),Je(),!0;I("Path Found: <b>"+e.name+"</b></br>Search Length: <b>0</b></br></br>Humans.",3e3)}function De(e,t){let n=document.createElement("div"),i=document.createElement("div");return i.classList.add("legendItem"),i.classList.add(e),n.appendChild(i),n.innerHTML+=t,fe.appendChild(n),!0}function Ve(e){if(!Array.isArray(e))throw new TypeError("'legendItems' must be an array holding the arrays of items to create, with the item arrays containing its 'classOfIcon' in the first index and 'text' in the second");pe=parseInt(window.getComputedStyle(fe).height),fe.innerHTML="";for(let t of e)De(t[0],t[1]);return pe=Math.max(parseInt(window.getComputedStyle(fe).height),pe),fe.style.height=pe+"px",!0}function Je(){document.getElementById("legend").innerHTML="",De(c?"tap":"click","Add Point"),De(c?"dragTap":"drag","Connect"),De(c?"doubleTap":"rightClick","Remove Point"),De(c?"zoomPinch":"zoom","Zoom")}function Re(e){var t;if(!we)return function(e){var t,n,i,r,o,a;if("touchmove"===(e=window.event||e).type){var s=new B(e.touches[0].clientX,e.touches[0].clientY),l=new B(e.touches[1].clientX,e.touches[1].clientY);o=de(i=s,r=l)/2,a=Math.atan2(r.y-i.y,r.x-i.x),t={x:r.x-o*Math.cos(a),y:r.y-o*Math.sin(a)},n=de(s,l)-he,he=de(s,l)}var h="touchmove"!=e.type?e.offsetX:t.x,c="touchmove"!=e.type?e.offsetY:t.y;("mousewheel"===e.type?e.wheelDelta:"touchmove"!==e.type?-e.detail:n)>0?M.scaleAt({x:h,y:c},1.1):M.scaleAt({x:h,y:c},1/1.1)}(e),t=()=>{P(ge)},M.isDirty()&&(k(),f(),M.apply()),t(),e.preventDefault(),!0}function ze(e,t){let n="mousedown"==e.type||"mousemove"==e.type||"mouseup"==e.type?new B(e.clientX-xe,e.clientY-me-pe-xe):new B(e.touches[0].clientX-xe,e.touches[0].clientY-me-pe-xe);return t?N(n):n}function je(){we=!1;for(let e of["closest","findPaths","search"])document.getElementById(e).removeAttribute("disabled"),document.getElementById(e).removeAttribute("aria-disabled");document.getElementById("sort").classList.remove("disabled"),ue.style.cursor="pointer"}function We(){we=!0,k(),P(ge);for(let e of["closest","findPaths","search"])document.getElementById(e).setAttribute("disabled",""),document.getElementById(e).setAttribute("aria-disabled","");document.getElementById("sort").classList.add("disabled"),ue.style.cursor="default"}function qe(){document.getElementById("navbarNavAltMarkup").classList.remove("show"),document.getElementsByClassName("navbar-toggler")[0].classList.add("collapsed")}function Fe(e){document.getElementById("searchType").innerHTML=e.target.innerHTML,"byMinimumSpanningTree"==e.target.id?document.getElementById("searchingFor").setAttribute("disabled",""):document.getElementById("searchingFor").removeAttribute("disabled")}window.addEventListener("resize",Me),window.addEventListener("orientationchange",(e=>{qe(),Me(e)}),!1),window.addEventListener("contextmenu",(e=>e.preventDefault())),window.addEventListener("load",(async e=>{(ue=document.getElementById("graphView")).style.border="2px solid black",ye=document.getElementById("header"),fe=document.getElementById("legend"),pe=fe.getBoundingClientRect().height,xe=parseInt(window.getComputedStyle(document.getElementById("canvasContainer")).marginTop),be=xe+parseInt(window.getComputedStyle(ue).border),ue.addEventListener("mousedown",Te),ue.addEventListener("touchstart",ke),ue.addEventListener("touchmove",Ie),ue.addEventListener("touchend",Ae),ue.addEventListener("mousemove",Ne),ue.addEventListener("mouseup",Oe),ue.addEventListener("mousewheel",Re,!1),ue.addEventListener("DOMMouseScroll",Re,!1),document.getElementById("closest").addEventListener("click",Be),document.getElementById("byX").addEventListener("click",Ce),document.getElementById("byY").addEventListener("click",Ce),document.getElementById("search").addEventListener("click",Le);for(let e of["byDepth","byBreadth","byMinimumSpanningTree","byShortestPaths"])document.getElementById(e).addEventListener("click",Fe);let t,n;Je(),await Me(e);let i=Math.min(ue.width/((t=780)*u),ue.height/((n=430)*u)),r=[{name:"Seattle",x:125,y:60},{name:"San Francisco",x:100,y:220},{name:"Los Angeles",x:128,y:285},{name:"Denver",x:325,y:185},{name:"Kansas City",x:450,y:255},{name:"Chicago",x:500,y:110},{name:"Boston",x:728,y:90},{name:"New York",x:725,y:130},{name:"Atlanta",x:625,y:305},{name:"Miami",x:650,y:410},{name:"Dallas",x:458,y:335},{name:"Houston",x:495,y:370}];Se=r.length;for(let e=0;e<r.length;e++){let t=Math.floor(Object.getOwnPropertyDescriptor(r[e],"x").value*i),n=Math.floor(Object.getOwnPropertyDescriptor(r[e],"y").value*i);t=Math.floor(ue.width/2/u-780*i/2+t),n=Math.floor(ue.height/2/u-430*i/2+n),Object.defineProperties(r[e],{x:{value:t},y:{value:n}})}(ge=new o(r,[[0,1,807],[0,3,1331],[0,5,2097],[1,2,381],[1,3,1267],[2,3,1015],[2,4,1663],[2,10,1435],[3,4,599],[3,5,1003],[4,5,533],[4,7,1260],[4,8,864],[4,10,496],[5,6,983],[5,7,787],[6,7,214],[7,8,888],[8,9,661],[8,10,781],[8,11,810],[9,11,1187],[10,11,239]])).print(),P(ge),je()})),document.getElementsByClassName("navbar-brand")[0].addEventListener("click",(()=>{new Audio("src/resources/a-whole-new-world-cropped.mp3").play()})),document.getElementById("findPaths").addEventListener("click",(()=>{document.getElementById("findPaths").classList.contains("collapsed")?document.getElementById("findPaths").classList.add("active"):document.getElementById("findPaths").classList.remove("active")}))})();